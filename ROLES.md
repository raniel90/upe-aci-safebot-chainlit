# ğŸ‘¥ Sistema de Roles - SafeBot

O SafeBot implementa um sistema inteligente de **personalizaÃ§Ã£o por perfil** (roles), oferecendo experiÃªncias completamente diferentes baseadas no tipo de usuÃ¡rio.

---

## ğŸ¯ VisÃ£o Geral

Cada role possui:
- âœ… **Prompt engineering especÃ­fico** - Linguagem e abordagem adaptadas
- âœ… **Mensagem de boas-vindas personalizada** - Contexto relevante
- âœ… **Estilo de comunicaÃ§Ã£o Ãºnico** - TÃ©cnico vs. PrÃ¡tico
- âœ… **Foco diferenciado** - GestÃ£o vs. OperaÃ§Ã£o

---

## ğŸ‘” SUPERVISOR - Gestor de SeguranÃ§a do Trabalho

### ğŸ‘¤ Perfil

Profissionais de gestÃ£o em seguranÃ§a do trabalho:
- TÃ©cnicos de seguranÃ§a do trabalho
- Engenheiros de seguranÃ§a
- Coordenadores de SESMT
- Gestores de compliance
- Auditores de seguranÃ§a

### ğŸ¯ Foco das Respostas

**GESTÃƒO E ESTRATÃ‰GIA:**
- ğŸ“Š Auditorias e checklists de conformidade
- âš–ï¸ InterpretaÃ§Ã£o tÃ©cnica da legislaÃ§Ã£o
- ğŸ“ ElaboraÃ§Ã£o de POPs e procedimentos
- ğŸ“ EstruturaÃ§Ã£o de programas de treinamento
- ğŸ” InvestigaÃ§Ã£o tÃ©cnica de acidentes
- ğŸ“‹ Controle de estoque e gestÃ£o de EPIs
- ğŸ“Š Indicadores e mÃ©tricas de seguranÃ§a
- âš–ï¸ Responsabilidades legais (empregador/empregado)
- ğŸ”— IntegraÃ§Ã£o com PPRA/PGR/PCMSO

### ğŸ’¼ Estilo de ComunicaÃ§Ã£o

- **Linguagem:** TÃ©cnica e precisa
- **Tom:** Profissional e formal
- **Estrutura:** SistemÃ¡tica e organizada
- **CitaÃ§Ãµes:** Artigos especÃ­ficos da NR-06 completos
- **Formato:** SeÃ§Ãµes claras, tabelas, checklists
- **Emojis:** Moderados (ğŸ“‹ âš–ï¸ ğŸ“Š ğŸ¯)

### ğŸ’¡ Exemplo de Resposta (Supervisor)

**Pergunta:** "Como implementar controle de entrega de EPIs?"

**Resposta Supervisor:**
```
**IMPLEMENTAÃ‡ÃƒO DE CONTROLE DE ENTREGA DE EPIs**

**1. FUNDAMENTAÃ‡ÃƒO LEGAL**

Conforme item 6.6.1 da NR-06, compete ao empregador:
- Fornecer ao trabalhador somente EPI aprovado (CA vÃ¡lido)
- Registrar o fornecimento ao trabalhador
- Orientar e treinar sobre uso adequado

**2. DOCUMENTAÃ‡ÃƒO OBRIGATÃ“RIA**

a) Ficha de Entrega de EPI (FE-EPI):
   - IdentificaÃ§Ã£o do trabalhador
   - DescriÃ§Ã£o do EPI (tipo, CA)
   - Data de entrega
   - Assinatura do recebedor
   - Motivo (admissÃ£o, substituiÃ§Ã£o, etc.)

b) Certificado de AprovaÃ§Ã£o (CA):
   - Manter cÃ³pias atualizadas
   - Verificar validade antes da entrega
   - Arquivar pelo perÃ­odo de uso + 20 anos

**3. PROCEDIMENTO OPERACIONAL**

ETAPA 1 - RequisiÃ§Ã£o:
  - Trabalhador solicita ao superior imediato
  - Superior valida necessidade
  - Encaminha para almoxarifado/SESMT

ETAPA 2 - ValidaÃ§Ã£o:
  - TÃ©cnico de seguranÃ§a verifica:
    * EPI adequado ao risco (PPRA/PGR)
    * CA vÃ¡lido
    * Tamanho/especificaÃ§Ã£o correta

ETAPA 3 - Entrega:
  - Preenchimento da FE-EPI
  - OrientaÃ§Ã£o sobre uso e conservaÃ§Ã£o
  - Assinatura e data
  - Arquivamento em pasta individual

**4. CONTROLES GERENCIAIS**

Indicadores sugeridos:
- Taxa de conformidade de entregas (meta: 100%)
- Prazo mÃ©dio de atendimento (meta: < 48h)
- % de CAs vencidos no estoque (meta: 0%)
- Taxa de recusa de uso (investigar se > 5%)

**5. AUDITORIA E FISCALIZAÃ‡ÃƒO**

EvidÃªncias documentais:
âœ… FE-EPI assinadas e datadas
âœ… CAs vÃ¡lidos arquivados
âœ… Registros de treinamento
âœ… POPs atualizados

NÃ£o conformidades comuns:
âŒ Falta de assinatura do trabalhador
âŒ CAs vencidos
âŒ AusÃªncia de treinamento registrado
âŒ EPI inadequado ao risco

**6. RESPONSABILIDADES**

Empregador (NR-06, 6.6.1):
- Adquirir, fornecer e registrar
- Exigir uso
- Orientar e treinar

Empregado (NR-06, 6.7.1):
- Usar corretamente
- Responsabilizar-se pela guarda
- Comunicar alteraÃ§Ãµes

**ğŸ“‹ Anexo:** Modelo de FE-EPI disponÃ­vel para download.
```

---

## ğŸ‘· USER - Trabalhador de ChÃ£o de FÃ¡brica

### ğŸ‘¤ Perfil

Trabalhadores operacionais:
- Operadores de mÃ¡quinas
- Montadores e soldadores
- Operadores de empilhadeira
- Trabalhadores da produÃ§Ã£o
- Auxiliares de manutenÃ§Ã£o

### ğŸ¯ Foco das Respostas

**PRÃTICA E DIA A DIA:**
- ğŸ›¡ï¸ Como usar corretamente os EPIs
- âœ… Quando usar cada equipamento
- ğŸ” Como identificar problemas nos EPIs
- âš ï¸ O que fazer em situaÃ§Ãµes de risco
- ğŸ“‹ Direitos e responsabilidades bÃ¡sicas
- ğŸ’¬ Como pedir novos EPIs ou relatar problemas

### ğŸ’¬ Estilo de ComunicaÃ§Ã£o

- **Linguagem:** Simples e direta
- **Tom:** AmigÃ¡vel e encorajador
- **Estrutura:** Passo a passo claro
- **CitaÃ§Ãµes:** Simplificadas ("A lei diz que...")
- **Formato:** Bullets, exemplos prÃ¡ticos, analogias
- **Emojis:** Frequentes (ğŸ›¡ï¸ âš ï¸ âœ… âŒ ğŸ’¡ ğŸ‘·)

### ğŸ’¡ Exemplo de Resposta (Trabalhador)

**Pergunta:** "Como implementar controle de entrega de EPIs?"

**Resposta Trabalhador:**
```
Opa! Pelo jeito vocÃª quer saber como pedir ou receber seus EPIs, nÃ©? 
Vou te explicar de forma bem prÃ¡tica! ğŸ‘·

## ğŸ“‹ Como funciona a entrega de EPI

### âœ… PASSO 1: Quando vocÃª precisa de EPI

VocÃª tem DIREITO de receber EPI quando:
â€¢ ComeÃ§ar a trabalhar (na admissÃ£o)
â€¢ Seu EPI estragar ou ficar velho
â€¢ Perder ou for roubado
â€¢ Mudar de funÃ§Ã£o (pode precisar de outros)

### ğŸ” PASSO 2: Como pedir

Ã‰ bem simples:
1. Fale com seu chefe/supervisor
2. Explique o que precisa ("minha luva furou", "capacete rachado")
3. Ele vai te encaminhar para pegar o novo

ğŸ’¡ **IMPORTANTE**: A empresa Ã© **OBRIGADA** a dar de graÃ§a! 
VocÃª NUNCA paga pelos EPIs. Isso Ã© lei! ğŸ›¡ï¸

### ğŸ“ PASSO 3: Na hora de pegar

Quando vocÃª for buscar o EPI:
â€¢ VocÃª vai assinar um papel (ficha de entrega)
â€¢ Isso Ã© normal! Ã‰ para registrar que vocÃª recebeu
â€¢ Guarde sempre! Se alguÃ©m perguntar, vocÃª tem o comprovante
â€¢ Anote a data e o que recebeu

### ğŸ‘ PASSO 4: Depois que receber

**FaÃ§a sempre:**
âœ… Confira se estÃ¡ do seu tamanho
âœ… Veja se nÃ£o tem defeito
âœ… Pergunte se tiver dÃºvida de como usar
âœ… Cuide bem! Limpe e guarde direito

**O que vocÃª deve evitar:**
âŒ Emprestar para outros (Ã© SEU, do seu tamanho)
âŒ Deixar jogado ou sujo
âŒ Usar errado sÃ³ porque "dÃ¡ muito trabalho"
âŒ Trabalhar sem o EPI certo

### âš ï¸ E se a empresa NÃƒO der o EPI?

Isso Ã© GRAVE! VocÃª tem direito:
1. Avise seu supervisor
2. Se nÃ£o resolver, fale com o tÃ©cnico de seguranÃ§a
3. Se continuar sem, vocÃª pode **RECUSAR o trabalho**
4. Ã‰ seu DIREITO trabalhar com seguranÃ§a!

ğŸ’¡ **Dica prÃ¡tica:** Quando vocÃª assinar a ficha de entrega, 
tire uma foto com seu celular. Assim vocÃª sempre tem o registro!

### ğŸ“ DÃºvidas comuns:

**P: E se eu esquecer o EPI em casa?**
R: Avise seu chefe. Pode pegar emprestado da empresa para o dia, 
mas lembre de trazer o seu amanhÃ£!

**P: Meu colega quer meu EPI emprestado, posso?**
R: NÃ£o! Cada um tem o seu, do tamanho certo. Ele deve pedir o dele.

**P: Tenho que pagar se perder?**
R: NÃ£o! Mas avise logo para pegar outro. A empresa nÃ£o pode 
te descontar do salÃ¡rio por isso.

Ficou claro? Se tiver mais dÃºvidas, Ã© sÃ³ perguntar! ğŸ‘ğŸ›¡ï¸
```

---

## ğŸ”„ ComparaÃ§Ã£o Direta

| Aspecto | ğŸ‘” Supervisor | ğŸ‘· Trabalhador |
|---------|--------------|----------------|
| **Linguagem** | TÃ©cnica, formal | Simples, direta |
| **Estrutura** | SeÃ§Ãµes numeradas, tabelas | Bullets, passo a passo |
| **CitaÃ§Ãµes legais** | "Item 6.6.1 da NR-06" | "A lei diz que..." |
| **Foco** | ImplementaÃ§Ã£o e gestÃ£o | Uso prÃ¡tico e direitos |
| **Tom** | Profissional | AmigÃ¡vel, encorajador |
| **Exemplos** | Frameworks, checklists | SituaÃ§Ãµes do dia a dia |
| **Tamanho** | Respostas longas e completas | Respostas objetivas |

---

## ğŸ‘¥ UsuÃ¡rios Configurados

### ğŸ“‹ Lista de UsuÃ¡rios PadrÃ£o

| Username | Senha (padrÃ£o) | Role | DescriÃ§Ã£o |
|----------|----------------|------|-----------|
| `supervisor` | `supervisor123` | supervisor | Gestor de SeguranÃ§a |
| `tecnico_seguranca` | `tecnico123` | supervisor | TÃ©cnico de SeguranÃ§a |
| `trabalhador` | `trabalhador123` | user | Trabalhador |
| `operador1` | `operador123` | user | Operador de MÃ¡quinas |

âš ï¸ **Importante:** Altere estas senhas em produÃ§Ã£o!

---

## âš™ï¸ Como Adicionar Novos UsuÃ¡rios

### MÃ©todo 1: Editar auth.py

```python
# Em auth.py, adicione ao dicionÃ¡rio USERS_DB:

"joao_engenheiro": {
    "password": os.getenv("SAFEBOT_JOAO_PASSWORD", "senha123"),
    "metadata": {
        "role": "supervisor",  # ou "user"
        "name": "JoÃ£o Silva",
        "provider": "credentials",
        "description": "Engenheiro de SeguranÃ§a"
    }
},
```

### MÃ©todo 2: Adicionar ao .env

```env
# Adicione ao .env
SAFEBOT_JOAO_PASSWORD=senha-segura-do-joao
```

---

## ğŸ“ Prompt Engineering por Role

### ğŸ§  EstratÃ©gias Aplicadas

#### Para Supervisor (TÃ©cnico):
1. **EstruturaÃ§Ã£o hierÃ¡rquica** - SeÃ§Ãµes numeradas
2. **FundamentaÃ§Ã£o legal rigorosa** - Artigos completos
3. **Frameworks e ferramentas** - Checklists, POPs
4. **AnÃ¡lise de riscos** - Conformidade e auditoria
5. **IntegraÃ§Ã£o sistÃªmica** - RelaÃ§Ã£o com outras NRs

#### Para Trabalhador (PrÃ¡tico):
1. **SimplificaÃ§Ã£o de linguagem** - Evita jargÃ£o tÃ©cnico
2. **TraduÃ§Ã£o de conceitos** - "Isso significa que..."
3. **Exemplos concretos** - SituaÃ§Ãµes reais do trabalho
4. **Empoderamento** - "VocÃª tem DIREITO..."
5. **Tom amigÃ¡vel** - "Vou te explicar..."

---

## ğŸ“Š MÃ©tricas de DiferenciaÃ§Ã£o

### Indicadores por Role

| MÃ©trica | Supervisor | Trabalhador |
|---------|------------|-------------|
| **Palavras tÃ©cnicas/resposta** | 40-60 | 5-10 |
| **Tamanho mÃ©dio resposta** | 800-1200 palavras | 300-500 palavras |
| **CitaÃ§Ãµes legais** | 5-10 artigos | 0-2 artigos |
| **Emojis/resposta** | 5-8 | 10-15 |
| **Complexidade sintÃ¡tica** | Alta | Baixa |

---

## ğŸ”§ CustomizaÃ§Ã£o AvanÃ§ada

### Criar Nova Role

Para criar uma nova role (ex: "auditor"):

**1. Criar prompt em `prompts.py`:**
```python
AUDITOR_INSTRUCTIONS = """
[InstruÃ§Ãµes especÃ­ficas para auditor]
"""

def get_instructions_by_role(role: str) -> str:
    if role == "auditor":
        return AUDITOR_INSTRUCTIONS
    elif role == "supervisor":
        return SUPERVISOR_INSTRUCTIONS
    else:
        return WORKER_INSTRUCTIONS
```

**2. Adicionar usuÃ¡rios em `auth.py`:**
```python
"auditor_externo": {
    "password": os.getenv("SAFEBOT_AUDITOR_PASSWORD", "auditor123"),
    "metadata": {
        "role": "auditor",
        "name": "Auditor Externo",
        "provider": "credentials"
    }
}
```

**3. Atualizar `.env.example`:**
```env
SAFEBOT_AUDITOR_PASSWORD=auditor123
```

---

## ğŸ¯ Boas PrÃ¡ticas

### âœ… Fazer

- âœ… Manter consistÃªncia no tom dentro de cada role
- âœ… Revisar prompts regularmente com feedback dos usuÃ¡rios
- âœ… Documentar mudanÃ§as no prompt engineering
- âœ… Testar ambos os perfis apÃ³s alteraÃ§Ãµes

### âŒ Evitar

- âŒ Misturar estilos de comunicaÃ§Ã£o
- âŒ Usar jargÃ£o tÃ©cnico com trabalhadores
- âŒ Simplificar demais para supervisores
- âŒ Assumir conhecimento prÃ©vio

---

## ğŸ“š ReferÃªncias

### InspiraÃ§Ã£o e Fundamentos

- **safebot-legacy** - Base do prompt engineering
- **NR-06** - FundamentaÃ§Ã£o legal
- **UX Writing** - PrincÃ­pios de linguagem por audiÃªncia
- **Instructional Design** - AdaptaÃ§Ã£o por nÃ­vel de conhecimento

---

## ğŸš€ Roadmap

### Futuras Melhorias

- [ ] Role "auditor" - Focado em compliance
- [ ] Role "rh" - GestÃ£o de pessoas e treinamentos
- [ ] Role "compras" - EspecificaÃ§Ãµes tÃ©cnicas de EPIs
- [ ] PersonalizaÃ§Ã£o por indÃºstria (construÃ§Ã£o, quÃ­mica, etc.)
- [ ] A/B testing de prompts
- [ ] Feedback loop para melhorar respostas

---

**ğŸ­ SafeBot - A resposta certa para cada pessoa!**
