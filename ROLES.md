# 👥 Sistema de Roles - SafeBot

O SafeBot implementa um sistema inteligente de **personalização por perfil** (roles), oferecendo experiências completamente diferentes baseadas no tipo de usuário.

---

## 🎯 Visão Geral

Cada role possui:
- ✅ **Prompt engineering específico** - Linguagem e abordagem adaptadas
- ✅ **Mensagem de boas-vindas personalizada** - Contexto relevante
- ✅ **Estilo de comunicação único** - Técnico vs. Prático
- ✅ **Foco diferenciado** - Gestão vs. Operação

---

## 👔 SUPERVISOR - Gestor de Segurança do Trabalho

### 👤 Perfil

Profissionais de gestão em segurança do trabalho:
- Técnicos de segurança do trabalho
- Engenheiros de segurança
- Coordenadores de SESMT
- Gestores de compliance
- Auditores de segurança

### 🎯 Foco das Respostas

**GESTÃO E ESTRATÉGIA:**
- 📊 Auditorias e checklists de conformidade
- ⚖️ Interpretação técnica da legislação
- 📝 Elaboração de POPs e procedimentos
- 🎓 Estruturação de programas de treinamento
- 🔍 Investigação técnica de acidentes
- 📋 Controle de estoque e gestão de EPIs
- 📊 Indicadores e métricas de segurança
- ⚖️ Responsabilidades legais (empregador/empregado)
- 🔗 Integração com PPRA/PGR/PCMSO

### 💼 Estilo de Comunicação

- **Linguagem:** Técnica e precisa
- **Tom:** Profissional e formal
- **Estrutura:** Sistemática e organizada
- **Citações:** Artigos específicos da NR-06 completos
- **Formato:** Seções claras, tabelas, checklists
- **Emojis:** Moderados (📋 ⚖️ 📊 🎯)

### 💡 Exemplo de Resposta (Supervisor)

**Pergunta:** "Como implementar controle de entrega de EPIs?"

**Resposta Supervisor:**
```
**IMPLEMENTAÇÃO DE CONTROLE DE ENTREGA DE EPIs**

**1. FUNDAMENTAÇÃO LEGAL**

Conforme item 6.6.1 da NR-06, compete ao empregador:
- Fornecer ao trabalhador somente EPI aprovado (CA válido)
- Registrar o fornecimento ao trabalhador
- Orientar e treinar sobre uso adequado

**2. DOCUMENTAÇÃO OBRIGATÓRIA**

a) Ficha de Entrega de EPI (FE-EPI):
   - Identificação do trabalhador
   - Descrição do EPI (tipo, CA)
   - Data de entrega
   - Assinatura do recebedor
   - Motivo (admissão, substituição, etc.)

b) Certificado de Aprovação (CA):
   - Manter cópias atualizadas
   - Verificar validade antes da entrega
   - Arquivar pelo período de uso + 20 anos

**3. PROCEDIMENTO OPERACIONAL**

ETAPA 1 - Requisição:
  - Trabalhador solicita ao superior imediato
  - Superior valida necessidade
  - Encaminha para almoxarifado/SESMT

ETAPA 2 - Validação:
  - Técnico de segurança verifica:
    * EPI adequado ao risco (PPRA/PGR)
    * CA válido
    * Tamanho/especificação correta

ETAPA 3 - Entrega:
  - Preenchimento da FE-EPI
  - Orientação sobre uso e conservação
  - Assinatura e data
  - Arquivamento em pasta individual

**4. CONTROLES GERENCIAIS**

Indicadores sugeridos:
- Taxa de conformidade de entregas (meta: 100%)
- Prazo médio de atendimento (meta: < 48h)
- % de CAs vencidos no estoque (meta: 0%)
- Taxa de recusa de uso (investigar se > 5%)

**5. AUDITORIA E FISCALIZAÇÃO**

Evidências documentais:
✅ FE-EPI assinadas e datadas
✅ CAs válidos arquivados
✅ Registros de treinamento
✅ POPs atualizados

Não conformidades comuns:
❌ Falta de assinatura do trabalhador
❌ CAs vencidos
❌ Ausência de treinamento registrado
❌ EPI inadequado ao risco

**6. RESPONSABILIDADES**

Empregador (NR-06, 6.6.1):
- Adquirir, fornecer e registrar
- Exigir uso
- Orientar e treinar

Empregado (NR-06, 6.7.1):
- Usar corretamente
- Responsabilizar-se pela guarda
- Comunicar alterações

**📋 Anexo:** Modelo de FE-EPI disponível para download.
```

---

## 👷 USER - Trabalhador de Chão de Fábrica

### 👤 Perfil

Trabalhadores operacionais:
- Operadores de máquinas
- Montadores e soldadores
- Operadores de empilhadeira
- Trabalhadores da produção
- Auxiliares de manutenção

### 🎯 Foco das Respostas

**PRÁTICA E DIA A DIA:**
- 🛡️ Como usar corretamente os EPIs
- ✅ Quando usar cada equipamento
- 🔍 Como identificar problemas nos EPIs
- ⚠️ O que fazer em situações de risco
- 📋 Direitos e responsabilidades básicas
- 💬 Como pedir novos EPIs ou relatar problemas

### 💬 Estilo de Comunicação

- **Linguagem:** Simples e direta
- **Tom:** Amigável e encorajador
- **Estrutura:** Passo a passo claro
- **Citações:** Simplificadas ("A lei diz que...")
- **Formato:** Bullets, exemplos práticos, analogias
- **Emojis:** Frequentes (🛡️ ⚠️ ✅ ❌ 💡 👷)

### 💡 Exemplo de Resposta (Trabalhador)

**Pergunta:** "Como implementar controle de entrega de EPIs?"

**Resposta Trabalhador:**
```
Opa! Pelo jeito você quer saber como pedir ou receber seus EPIs, né? 
Vou te explicar de forma bem prática! 👷

## 📋 Como funciona a entrega de EPI

### ✅ PASSO 1: Quando você precisa de EPI

Você tem DIREITO de receber EPI quando:
• Começar a trabalhar (na admissão)
• Seu EPI estragar ou ficar velho
• Perder ou for roubado
• Mudar de função (pode precisar de outros)

### 🔍 PASSO 2: Como pedir

É bem simples:
1. Fale com seu chefe/supervisor
2. Explique o que precisa ("minha luva furou", "capacete rachado")
3. Ele vai te encaminhar para pegar o novo

💡 **IMPORTANTE**: A empresa é **OBRIGADA** a dar de graça! 
Você NUNCA paga pelos EPIs. Isso é lei! 🛡️

### 📝 PASSO 3: Na hora de pegar

Quando você for buscar o EPI:
• Você vai assinar um papel (ficha de entrega)
• Isso é normal! É para registrar que você recebeu
• Guarde sempre! Se alguém perguntar, você tem o comprovante
• Anote a data e o que recebeu

### 👍 PASSO 4: Depois que receber

**Faça sempre:**
✅ Confira se está do seu tamanho
✅ Veja se não tem defeito
✅ Pergunte se tiver dúvida de como usar
✅ Cuide bem! Limpe e guarde direito

**O que você deve evitar:**
❌ Emprestar para outros (é SEU, do seu tamanho)
❌ Deixar jogado ou sujo
❌ Usar errado só porque "dá muito trabalho"
❌ Trabalhar sem o EPI certo

### ⚠️ E se a empresa NÃO der o EPI?

Isso é GRAVE! Você tem direito:
1. Avise seu supervisor
2. Se não resolver, fale com o técnico de segurança
3. Se continuar sem, você pode **RECUSAR o trabalho**
4. É seu DIREITO trabalhar com segurança!

💡 **Dica prática:** Quando você assinar a ficha de entrega, 
tire uma foto com seu celular. Assim você sempre tem o registro!

### 📞 Dúvidas comuns:

**P: E se eu esquecer o EPI em casa?**
R: Avise seu chefe. Pode pegar emprestado da empresa para o dia, 
mas lembre de trazer o seu amanhã!

**P: Meu colega quer meu EPI emprestado, posso?**
R: Não! Cada um tem o seu, do tamanho certo. Ele deve pedir o dele.

**P: Tenho que pagar se perder?**
R: Não! Mas avise logo para pegar outro. A empresa não pode 
te descontar do salário por isso.

Ficou claro? Se tiver mais dúvidas, é só perguntar! 👍🛡️
```

---

## 🔄 Comparação Direta

| Aspecto | 👔 Supervisor | 👷 Trabalhador |
|---------|--------------|----------------|
| **Linguagem** | Técnica, formal | Simples, direta |
| **Estrutura** | Seções numeradas, tabelas | Bullets, passo a passo |
| **Citações legais** | "Item 6.6.1 da NR-06" | "A lei diz que..." |
| **Foco** | Implementação e gestão | Uso prático e direitos |
| **Tom** | Profissional | Amigável, encorajador |
| **Exemplos** | Frameworks, checklists | Situações do dia a dia |
| **Tamanho** | Respostas longas e completas | Respostas objetivas |

---

## 👥 Usuários Configurados

### 📋 Lista de Usuários Padrão

| Username | Senha (padrão) | Role | Descrição |
|----------|----------------|------|-----------|
| `supervisor` | `supervisor123` | supervisor | Gestor de Segurança |
| `tecnico_seguranca` | `tecnico123` | supervisor | Técnico de Segurança |
| `trabalhador` | `trabalhador123` | user | Trabalhador |
| `operador1` | `operador123` | user | Operador de Máquinas |

⚠️ **Importante:** Altere estas senhas em produção!

---

## ⚙️ Como Adicionar Novos Usuários

### Método 1: Editar auth.py

```python
# Em auth.py, adicione ao dicionário USERS_DB:

"joao_engenheiro": {
    "password": os.getenv("SAFEBOT_JOAO_PASSWORD", "senha123"),
    "metadata": {
        "role": "supervisor",  # ou "user"
        "name": "João Silva",
        "provider": "credentials",
        "description": "Engenheiro de Segurança"
    }
},
```

### Método 2: Adicionar ao .env

```env
# Adicione ao .env
SAFEBOT_JOAO_PASSWORD=senha-segura-do-joao
```

---

## 🎓 Prompt Engineering por Role

### 🧠 Estratégias Aplicadas

#### Para Supervisor (Técnico):
1. **Estruturação hierárquica** - Seções numeradas
2. **Fundamentação legal rigorosa** - Artigos completos
3. **Frameworks e ferramentas** - Checklists, POPs
4. **Análise de riscos** - Conformidade e auditoria
5. **Integração sistêmica** - Relação com outras NRs

#### Para Trabalhador (Prático):
1. **Simplificação de linguagem** - Evita jargão técnico
2. **Tradução de conceitos** - "Isso significa que..."
3. **Exemplos concretos** - Situações reais do trabalho
4. **Empoderamento** - "Você tem DIREITO..."
5. **Tom amigável** - "Vou te explicar..."

---

## 📊 Métricas de Diferenciação

### Indicadores por Role

| Métrica | Supervisor | Trabalhador |
|---------|------------|-------------|
| **Palavras técnicas/resposta** | 40-60 | 5-10 |
| **Tamanho médio resposta** | 800-1200 palavras | 300-500 palavras |
| **Citações legais** | 5-10 artigos | 0-2 artigos |
| **Emojis/resposta** | 5-8 | 10-15 |
| **Complexidade sintática** | Alta | Baixa |

---

## 🔧 Customização Avançada

### Criar Nova Role

Para criar uma nova role (ex: "auditor"):

**1. Criar prompt em `prompts.py`:**
```python
AUDITOR_INSTRUCTIONS = """
[Instruções específicas para auditor]
"""

def get_instructions_by_role(role: str) -> str:
    if role == "auditor":
        return AUDITOR_INSTRUCTIONS
    elif role == "supervisor":
        return SUPERVISOR_INSTRUCTIONS
    else:
        return WORKER_INSTRUCTIONS
```

**2. Adicionar usuários em `auth.py`:**
```python
"auditor_externo": {
    "password": os.getenv("SAFEBOT_AUDITOR_PASSWORD", "auditor123"),
    "metadata": {
        "role": "auditor",
        "name": "Auditor Externo",
        "provider": "credentials"
    }
}
```

**3. Atualizar `.env.example`:**
```env
SAFEBOT_AUDITOR_PASSWORD=auditor123
```

---

## 🎯 Boas Práticas

### ✅ Fazer

- ✅ Manter consistência no tom dentro de cada role
- ✅ Revisar prompts regularmente com feedback dos usuários
- ✅ Documentar mudanças no prompt engineering
- ✅ Testar ambos os perfis após alterações

### ❌ Evitar

- ❌ Misturar estilos de comunicação
- ❌ Usar jargão técnico com trabalhadores
- ❌ Simplificar demais para supervisores
- ❌ Assumir conhecimento prévio

---

## 📚 Referências

### Inspiração e Fundamentos

- **safebot-legacy** - Base do prompt engineering
- **NR-06** - Fundamentação legal
- **UX Writing** - Princípios de linguagem por audiência
- **Instructional Design** - Adaptação por nível de conhecimento

---

## 🚀 Roadmap

### Futuras Melhorias

- [ ] Role "auditor" - Focado em compliance
- [ ] Role "rh" - Gestão de pessoas e treinamentos
- [ ] Role "compras" - Especificações técnicas de EPIs
- [ ] Personalização por indústria (construção, química, etc.)
- [ ] A/B testing de prompts
- [ ] Feedback loop para melhorar respostas

---

**🎭 SafeBot - A resposta certa para cada pessoa!**
